encoder:
  dense_model: sentence-transformers/allenai-specter
  sparse_model: naver/splade-v3
  max_length: 512
  normalize_dense: true
  device: null
  use_specter2: true
  specter2_base_adapter: allenai/specter2  # For document embeddings
  specter2_query_adapter: allenai/specter2_adhoc_query  # For query embeddings

index:
  batch_size: 16
  dense_output_dir: data/dense_index
  sparse_output_dir: data/sparse_index
  use_gpu_faiss: true
  checkpoint_enabled: true
  chunk_size: 10000
  sparse_encoder_batch_size: 4

search:
  top_k: 10
  retrieval_k: 1000
  rrf_k: 60
  # Weighted fusion settings
  fusion_method: weighted  # "rrf" for classic RRF, "weighted" for weighted score fusion
  dense_weight: 0.2
  sparse_weight: 0
  cross_encoder_weight: 0.8
  normalize_scores: true  # Min-max normalize component scores before fusion

query_rewriting:
  enabled: true  # Set to true to enable LLM-based query expansion
  model: "Qwen/Qwen3-4B-Instruct-2507-FP8"  # Use standard version instead of FP8 for better compatibility
  max_length: 128
  temperature: 0.3
  num_rewrites: 1  # Number of query rewrites to generate (1-5 recommended)
  device: null  # null = auto-detect (cuda if available, else cpu)

reranker:
  enabled: true
  model: BAAI/bge-reranker-v2-m3
  rerank_top_k: 200
  max_length: 512
  batch_size: 32

data:
  jsonl_file: data/arxiv_1k.jsonl
  text_key: abstract
  id_key: id
  title_key: title
  use_metadata: true
  categories_key: categories
  authors_key: authors
  metadata_template: 'Title: {title}


    Authors: {authors}


    Categories: {categories}


    Abstract: {abstract}'
